<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jason Zivkovic">
<meta name="dcterms.date" content="2021-06-05">
<meta name="description" content="Going from absolutely zero R coding experience to being able to extract data using the R package worldfootballR.">

<title>Don’t Blame the Data - ANALYSE FOOTBALL (SOCCER) DATA IN R WITH ZERO R EXPERIENCE</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-145056765-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../icon.jpg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Don’t Blame the Data</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="../../pages/win_prob_app.html">
 <span class="dropdown-text">NBL WinProbability App</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/worldfootballR.html">
 <span class="dropdown-text">worldfootballR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/chessR.html">
 <span class="dropdown-text">chessR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/nblR.html">
 <span class="dropdown-text">nblR</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/bettRtab.html">
 <span class="dropdown-text">bettRtab</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-models" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Models</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-models">    
        <li>
    <a class="dropdown-item" href="../../pages/aflm-tipping.html">
 <span class="dropdown-text">AFLM Tipping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../pages/nbl-predictions.html">
 <span class="dropdown-text">NBL 2023 Match Predictions</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/JaseZiv"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/jaseziv"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/jason-zivkovic-4a0a1926/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">ANALYSE FOOTBALL (SOCCER) DATA IN R WITH ZERO R EXPERIENCE</h1>
                  <div>
        <div class="description">
          Going from absolutely zero R coding experience to being able to extract data using the R package worldfootballR.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">worldfootballR</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jason Zivkovic </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 5, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><img src="r_worldfootballR_post_hero.png" class="img-fluid"></p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Do you find your love of football and curious mind converging to the point where you want to dig a little into the data to confirm if what your eyes are seeing is in fact what’s happening, but you just don’t know how to get started, or where to get data from? Or maybe you have already started doing some analysis in visualisation software, including PowerBI, Tableau, Excel, etc, or know enough about statistics to want to perform some statistical modelling, but you just need to know how to get access to more data, quicker and easier? Then this post will be for you.</p>
<p>This post will hopefully teach you how to use worldfootballR - an R package built to aid in the extraction of world football data from a number of popular websites (with their consent).</p>
<p>The post will demonstrate how to use the package to extract your data programmatically and save it in a suitable file format that your report ingests, saving you the manual steps of extracting data from popular websites listed below.</p>
<p>Additionally, I will also aim to demonstrate the visualisation tools available in R, if you so choose to invest the time into learning R.</p>
<p>A final aim of the post is to highlight what’s possible in R for those new to R programming in the hope that it stokes enough interest to get you started on your R learning journey.</p>
<p>What this post won’t be is an in depth how-to-code-in-R post - there are plenty of online resources, including MOOCs, posts, screencasts, etc to do that. This post will focus on getting you up and running with data in your hands… or on your screens.</p>
<section id="what-data-can-i-get" class="level2">
<h2 class="anchored" data-anchor-id="what-data-can-i-get">What data can I get?</h2>
<p>The package as at version 0.3.2 provides access to data from the following data sites:</p>
<ul>
<li>FBref.com (a whole host of data to analyse, including results, match stats, season long stats, player and team stats, etc);</li>
<li>Transfermarkt.com (player market values, team transfer history, player transfer history); and,</li>
<li>Understat.com (shot locations data for matches played in the major leagues)</li>
</ul>
<p>These three sites are regularly used by analysts the world over, however the package is constantly evolving and may include data from additional sites in the future.</p>
<p>To my knowledge, only FBref provide the ability to export data to a file - the other two don’t, so you’d need to find some other way to get your data (painfully slow copy and paste), and that’s where <code>worldfootballR</code> come in.</p>
</section>
<section id="prerequisites" class="level2">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<p>The only prerequisites to this post are that you have a computer, internet connection and the desire to analyse world football data. This post is designed to take any aspiring analyst with absolutely no R coding experience to being able to extract data programmatically using the <code>worldfootballR</code> R library.</p>
</section>
<section id="what-is-r-why-would-i-use-r" class="level2">
<h2 class="anchored" data-anchor-id="what-is-r-why-would-i-use-r">What is R / Why would I use R?</h2>
<p>From R’s official site (https://www.r-project.org/about.html);</p>
<blockquote class="blockquote">
<p>R is a language and environment for statistical computing and graphics.</p>
</blockquote>
<p>You can find out a lot more about R as you get more experienced with the language on the home page, but all you need to know for now is that R will be another tool in your toolkit to perform the analyses you want to do. R is an amazing programming framework that allows you to do a number of things, including data cleaning, performing statistical analysis and modeling and building fully customisable visualisations using the R programming language.</p>
<p>Importantly, anything programmed means it’s repeatable. Set up your code upfront, then simply rerun it to get consistent results.</p>
<p>The world is your oyster if you have the drive to learn.</p>
<hr>
</section>
</section>
<section id="installing-r-and-rstudio" class="level1">
<h1>Installing R and RStudio</h1>
<p>This first section will detail the steps required to install R and RStudio, before you can get started with pulling data using <code>worldfootballR</code>.</p>
<section id="getting-started" class="level2">
<h2 class="anchored" data-anchor-id="getting-started">Getting started</h2>
<p>Ok so a few things before we dive right in… this is in layman’s terms (because I myself am a layman). R is the engine, the coding language driving everything you want to do, and RStudio is the pretty graphical user interface (GUI pronounced “gooey”) that gives you additional functionality when writing code in it. I am going to propose installing both R and RStudio in this post, but if you don’t want RStudio (I advise you to go with RStudio), you could still run the code to get the data you need (I will assume here everything is done in RStudio).</p>
</section>
<section id="install-r" class="level2">
<h2 class="anchored" data-anchor-id="install-r">Install R</h2>
<p>You remember how I said I’m a layman? It’ll extend itself here. We’re going to install R and we’re going to use all of the default options (just keep clicking “<em>accept</em>” or “<em>agree</em>”, or “<em>continue</em>”, and nothing else until R has been successfully installed. You can customise the installation when you’re better versed in R, but for now, just show me the data!</p>
<p>So how to find R to install R you ask? Well, you have to type into Google some really sophisticated stuff… “<em>download r windows</em>” or on Mac OS… yep, you guessed it, “<em>download r mac</em>”.</p>
<p><img src="download_r.jpg" class="img-fluid"></p>
<p>If you can’t be bothered doing that, here are the links:</p>
<ul>
<li>For Windows OS: https://cran.r-project.org/bin/windows/base/</li>
</ul>
<p>Select “Download R X.X.X for Windows”, with “X.X.X” being for whatever is the most recent version of R:</p>
<p><img src="download_r_win.jpg" class="img-fluid"></p>
<ul>
<li>For Mac OS: https://cran.r-project.org/bin/macosx/</li>
</ul>
<p>Depending on what version of Mac OS you’re running will determine which version to install, but generally speaking it’ll only be one of the highlighted options below:</p>
<p><img src="download_r_mac.jpg" class="img-fluid"></p>
<p>Once you have selected either of the Windows or Mac OS versions, install as you would any software, remembering my one special rule at the start of this section… default options all the way.</p>
</section>
<section id="now-for-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="now-for-rstudio">Now for RStudio</h2>
<p>Once R has been installed, we can now go ahead and install RStudio, remember, the GUI that will allow you to code in and provide additional functionality.</p>
<p>Back to our intricate Google search query… “<em>download rstudio</em>”, and select the first result:</p>
<p><img src="download_r_studio.jpg" class="img-fluid"></p>
<p>Or for the URL: https://www.rstudio.com/products/rstudio/download/</p>
<p>Once we’ve opened the page, we’re presented with a few pricing options, but if you’re like almost all amateur analysts (let’s be honest, even professional analysts), you’re probably only going to need the free version:</p>
<p><img src="rstudio_options.jpg" class="img-fluid"></p>
</section>
<section id="were-almost-ready-to-start-coding" class="level2">
<h2 class="anchored" data-anchor-id="were-almost-ready-to-start-coding">We’re (almost) ready to start coding!</h2>
<p>Well, we’re almost ready to start coding, but first we’ll do a bit of a tour of RStudio (again, for those that have forgotten, RStudio is the software where we type and execute our R code).</p>
<p><img src="rstudio_display.jpg" class="img-fluid"></p>
<p>The console pane is where we will be able to see our code running (or run our code in here if we’re not using the scripts), whether there are any “errors” or “warnings” and printed outputs.</p>
<p>The environment is the sections where we will see the objects that we’ve imported, or created, including data frames (think of something similar to an Excel table).</p>
<p>In the viewers pane, there are a few tabs, including being able to navigate through the file system (‘Files’ tab), any visualisations we’ve created (‘Plots’ tab), the libraries/packages we have loaded on our machines and have available to us “locally” (‘Packages’ tab), a help section, where we can get additional details on what we need to provide the functions to work and a ‘Viewer’ tab to see HTML outputs.</p>
</section>
<section id="now-were-ready-to-start-coding" class="level2">
<h2 class="anchored" data-anchor-id="now-were-ready-to-start-coding">Now we’re ready to start coding</h2>
<p>Open up an R script (there are a number of different options to code in, but a .R script is the best place to start.</p>
<p>To open up a script, you can either press <code>control+shift+n</code> on a Windows machine, or <code>command+shift+n</code> on a Mac, or you can select a new script with the drop down in the top-left corner:</p>
<p><img src="open_r_script.jpg" class="img-fluid"></p>
<p>Changing the layout as such:</p>
<p><img src="rstudio_full_layout.jpg" class="img-fluid"></p>
<p>We will start writing code in the top-left quadrant.</p>
<hr>
</section>
</section>
<section id="worldfootballr" class="level1">
<h1>worldfootballR</h1>
<p>So now we’re here, ready to start coding right? Well we’ve just got one more thing to cover off. What is <a href="https://jaseziv.github.io/worldfootballR/"><code>worldfootballR</code></a>?</p>
<p><code>worldfootballR</code> is a package made up of functions that aid in the extraction of data from popular football sites.</p>
<p>I know what you’re thinking - what are functions??</p>
<p>From <a href="https://www.datacamp.com/community/tutorials/functions-in-r-a-tutorial">DataCamp</a></p>
<blockquote class="blockquote">
<p>In programming, you use functions to incorporate sets of instructions that you want to use repeatedly or that, because of their complexity, are better self-contained in a sub program and called when needed. A function is a piece of code written to carry out a specified task; it can or can not accept arguments or parameters and it can or can not return one or more values.</p>
</blockquote>
<p>Crystal clear right? Well all you need to know is that worldfootballR has taken lines and lines of code to extract data and essentially condensed it down to a line (and more importantly for you, no web scraping knowledge by you).</p>
<p>Say for instance, you wanted to get match summary information for a particular match(es) from FBref.com… rather than learning about R programming and web scraping to be able to write this code:</p>
<p><img src="function_code.jpg" class="img-fluid"></p>
<p>All you needed to do was run this line of code:</p>
<pre><code>get_match_summary(match_url)</code></pre>
<p>Ok, so now I think we’re ready to start you writing code to extract and save data in a form you need.</p>
<section id="writing-code" class="level2">
<h2 class="anchored" data-anchor-id="writing-code">Writing code</h2>
<p>Before I fully get in to the nuts and bolts of the code, I just want to point you to some resources.</p>
<p>A website has been created for the worldfootballR package that will give you a full run down of all the functions available and the arguments you need to pass to those functions to get the data you want. The website can be found <a href="https://jaseziv.github.io/worldfootballR/">here</a>.</p>
<p>Now we can really start writing code.</p>
<p>As we’ve already established, packages contain functions (code to do something). To use these packages they need to be installed (downloaded onto our laptops) first.</p>
<p>Packages will typically (but not limited to) either be housed on CRAN (a central repository for all packages) or on GitHub. <code>worldfootballR</code> is housed on GitHub, so the instructions for installing this package are slightly different to the packages housed on CRAN. Before we can install <code>worldfootballR</code>, we need to install the <code>devtools</code> package to enable the installation of <code>worldfootballR</code>. We will also install another package, <code>xlsx</code> that will enable us to save files in ‘.xlsx’ format.</p>
<p>We type (just copy and paste) these lines of code into our R script the first time we use R <strong>OR</strong> when we update our version of R <strong>OR</strong> the package updates its functionality:</p>
<pre><code># to allow us to install packages from github:
install.packages("devtools")

# a meta package that contains packages for data cleaning, analysis and visualisation
install.packages("tidyverse")

# to save xlsx files
install.packages("xlsx")</code></pre>
<p>You’ll know that they have successfully installed if there are no error messages and you can see the you see the “&gt;” symbol and a blinking cursor in the console section.</p>
<p><img src="install_devtools.jpg" class="img-fluid"></p>
<p>Then we will install <code>worldfootballR</code> (it’s what we’re all here for) and importantly load the library - it’s not enough to just install the package, we need to load it to make the functions easily available in our current session.</p>
<p><strong>Note:</strong> We only need to install the package the first time we install R <strong>OR</strong> if we update our version of R, <strong>OR</strong> if there is a update to a newer version of the package.</p>
<pre><code>devtools::install_github("JaseZiv/worldfootballR", ref = "main")</code></pre>
<p><strong>Note 2:</strong> While we only need to install it very infrequently, we need to load the package <strong>every time</strong> we want to use the package.</p>
<pre><code>library(worldfootballR)</code></pre>
</section>
<section id="the-world-is-your-oyster" class="level2">
<h2 class="anchored" data-anchor-id="the-world-is-your-oyster">The world is your oyster</h2>
<p>There are a number of functions in <code>worldfootballR</code> to enable you to get all the data you need.</p>
<p>To find these functions, you can visit the reference page on the package website <a href="https://jaseziv.github.io/worldfootballR/reference/index.html">here</a>. The reference page will give you a brief summary of what the function does - for more detailed info, click on the function and it’ll take you to the function page.</p>
<p>Additionally, there are instructions and example code on the website for each of the sites data is collected from:</p>
<ul>
<li>Click <a href="https://jaseziv.github.io/worldfootballR/articles/extract-fbref-data.html">here</a> for <strong>FBref</strong> data</li>
<li>Click <a href="https://jaseziv.github.io/worldfootballR/articles/extract-transfermarkt-data.html">here</a> for <strong>Transfermarkt</strong> data</li>
<li>Click <a href="https://jaseziv.github.io/worldfootballR/articles/extract-understat-data.html">here</a> for <strong>Understat</strong> data</li>
</ul>
</section>
<section id="lets-get-some-data" class="level2">
<h2 class="anchored" data-anchor-id="lets-get-some-data">Let’s get some data</h2>
<p>Now the fun part - getting data!</p>
<p>Before we get started, in the code below, when we see a “#” at the beginning of text, that is a comment, not executable code, and it’s how R programmers write notes to themselves, or others who use the code to give an overview of what is being done.</p>
<p>At the start of every script, it is best practise to include all the packages you’re going to be using/needing in your analysis. Installing packages only needs to be done the first time you start using R, when installing new versions or R, or when newer versions of the package become available and you want the updates that have been created.</p>
<p>The code we would run is below. A few things to remember:</p>
<ol type="1">
<li>To ‘run’ code we’ve typed out, there are two main ways;</li>
</ol>
<ol type="a">
<li>Highlight the code you want to run and press <code>control+enter</code> or <code>command+enter</code> on MacOS</li>
<li>Have the cursor on the line you want to run and press <code>control+enter</code> or <code>command+enter</code> on MacOS</li>
</ol>
<ol start="2" type="1">
<li>A “#” in a script signifies comments, and I will use them in the code to tell you what we’re doing</li>
</ol>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remember, we need to ensure we've installed the packages we need, but we need to do this very infrequently ( to run the 'install' lines below, simply delete the '#' before the code:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("devtools")</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("xlsx")</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tidyverse")</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github("JaseZiv/worldfootballR", ref = "main")</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># once it's been installed, then we need to load the functions (code to let you get the data you want) in the library (this needs to be done every time you want to run your script)</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(worldfootballR)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xlsx)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="i-want-shooting-data" class="level3">
<h3 class="anchored" data-anchor-id="i-want-shooting-data">I want shooting data!</h3>
<p>Let’s say we want to get the shooting data from FBref for teams in the 2020-2021 EPL season, to be able to analyse how many goals a team scored, or how they performed against expectation (xG), or from what average distance they shot from:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="fbref_shooting.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Source: FBref https://fbref.com/en/comps/9/Premier-League-Stats</figcaption><p></p>
</figure>
</div>
<p>Then we run the specific code to extract shooting data from FBref.com:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's get our season team shooting data from FBref:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>prem_2021_shooting <span class="ot">&lt;-</span> <span class="fu">get_season_team_stats</span>(<span class="at">country =</span> <span class="st">"ENG"</span>, <span class="at">gender =</span> <span class="st">"M"</span>, <span class="at">season_end_year =</span> <span class="st">"2021"</span>, <span class="at">tier =</span> <span class="st">"1st"</span>, <span class="at">stat_type =</span> <span class="st">"shooting"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">

</div>
<p>And this is what the data looks like in R now:</p>
<p><img src="shooting_output_r.jpg" class="img-fluid"></p>
</section>
<section id="i-just-want-the-data-and-nothing-else" class="level3">
<h3 class="anchored" data-anchor-id="i-just-want-the-data-and-nothing-else">I just want the data and nothing else</h3>
<p>If all you want is a csv or Excel output (to take to some other software/framework), then the below lines of code will address that need:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to save the file as a csv:</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x=</span> prem_2021_shooting, <span class="at">file =</span> <span class="st">"EPL_shooting_2021_season.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or we can save an .xlsx file:</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(<span class="at">x=</span> prem_2021_shooting, <span class="at">file =</span> <span class="st">"EPL_shooting_2021_season.xlsx"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>And this is how our output looks, and this output can be fed in to any visualisation software we choose to use:</p>
<p><img src="shooting_output_csv.jpg" class="img-fluid"></p>
</section>
<section id="but-r-has-more-to-offer-right" class="level3">
<h3 class="anchored" data-anchor-id="but-r-has-more-to-offer-right">But R has more to offer right?</h3>
<p>R is a whole lot more than a tool for extracting and saving data.</p>
<p>We can create fully customisable visualisations with code to analyse our data. This flexibility means your creative juices would only be constrained by your desire to practise and learn and practise and learn R.</p>
<p>Below, we have plotted a team’s performance against expected goals for the season. Teams that finished above the line scored more goals that xG would have had them scored, while teams below the dashed line scored less.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get our data ready for plotting</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>prem_2021_shooting <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter out only the team shooting data, not their opponents also</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Team_or_Opponent <span class="sc">==</span> <span class="st">"team"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a new column that removes penalties from the team's goal total</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">non_P_Gls =</span> Gls_Standard <span class="sc">-</span> PK_Standard) <span class="sc">%&gt;%</span> </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># start plotting:</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span> npxG_Expected, <span class="at">y=</span> non_P_Gls)) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a line through the plot with slope =  1 and the yintercept = 0</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">linetype=</span><span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we want to make it a scatter plot</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">6</span>, <span class="at">colour=</span><span class="st">"midnightblue"</span>, <span class="at">fill=</span><span class="st">"midnightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">shape=</span><span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># lets also add team name labels</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(<span class="fu">aes</span>(<span class="at">label =</span> Squad), <span class="at">colour =</span> <span class="st">"midnightblue"</span>, <span class="at">size=</span><span class="dv">5</span>) <span class="sc">+</span> </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># limit the x and y-axis to start at 10 and finish at 100</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">100</span>), <span class="at">name =</span> <span class="st">"Non-Pen xG"</span>) <span class="sc">+</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">100</span>), <span class="st">"Non-Pen Goals"</span>) <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create a title and subtitle - all plots should have this</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"DID TEAMS SCORE AS EXPECTED?"</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>          <span class="at">subtitle =</span> <span class="st">"Teams above the dashed line exceeded their xG for the</span><span class="sc">\n</span><span class="st">season, while teams below didn't"</span>) <span class="sc">+</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># apply a pre-programmed general theme:</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># but then we can customise our plot even more - first we make the background black:</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># change the title and subtitle format</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">28</span>, <span class="at">face=</span><span class="st">"bold"</span>), <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">22</span>, <span class="at">colour=</span><span class="st">"grey30"</span>),</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        <span class="co"># and change where the plot is aligned - in this case it's left-aligned</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title.position =</span> <span class="st">"plot"</span>, <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># change the size of aixs titles and text</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">16</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/shooting_plot-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
<p>We could also calculate how closely correlated xG is to expected goals using the <code>cor()</code> function in R, which we see printed out to be 0.8805275 - highly correlated indicating teams score pretty close to expected:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first we will create a new data set of only the team's performance, and not how their opponents played against them</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>prem_team <span class="ot">&lt;-</span> prem_2021_shooting <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Team_or_Opponent <span class="sc">==</span> <span class="st">"team"</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># now we calculate the Pearson correlation</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(prem_team<span class="sc">$</span>Gls_Standard, prem_team<span class="sc">$</span>xG_Expected)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.8931299</code></pre>
</div>
</div>
</section>
<section id="more-data-please" class="level3">
<h3 class="anchored" data-anchor-id="more-data-please">More data please</h3>
<p>FBref.com is a great site that has given analysts unprecedented access to their data, including the ability to extract to csv’s manually. This is great when there is only one extract you need, but when there are multiple extracts, then this becomes infinitely more time consuming! Functions have been created for these, and the official <a href="https://jaseziv.github.io/worldfootballR/"><code>worldfootballR</code> site</a> will get you going with them.</p>
<p>Others, like Transfermarkt.com and Understat.com don’t give you the ability to export to files. <code>worldfootballR</code> is here to help there too!</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's get the transfer balances for the 2020/21 Bundesliga season</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>team_balances <span class="ot">&lt;-</span> <span class="fu">tm_team_transfer_balances</span>(<span class="at">country_name =</span> <span class="st">"Germany"</span>, <span class="at">start_year =</span> <span class="dv">2020</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to save the file as a csv:</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(<span class="at">x=</span> team_balances, <span class="at">file =</span> <span class="st">"bundesliga_transfer_balances2020_2021.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># or we can save an .xlsx file:</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(<span class="at">x=</span> team_balances, <span class="at">file =</span> <span class="st">"bundesliga_transfer_balances2020_2021.xlsx"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's start creating our plot:</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>team_balances <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the new two lines use 'mutate()' from the dplyr package to create or change new columns</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># here, we create a net_transfer_income column that subtracts the expenditure form income</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">net_transfer_income =</span> income_euros <span class="sc">-</span> expenditure_euros) <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and we can also come up with a flag for if the income is above or below 0</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">green =</span> net_transfer_income <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ggplot is how we visualise our data</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>net_transfer_income, <span class="at">y=</span> squad, <span class="at">fill =</span> green)) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># manually select colours to use:</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkred"</span>, <span class="st">"darkgreen"</span>), <span class="at">name =</span> <span class="st">"Made</span><span class="sc">\n</span><span class="st">Money?"</span>) <span class="sc">+</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># change the data labels on the x-axis to be formatted to currency:</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar, <span class="at">name =</span> <span class="st">"Net Transfer Income"</span>) <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># add a caption that sources the data:</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">"Source: transfermarkt.com"</span>) <span class="sc">+</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we also want a title and subtitle:</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"BUNDESLIGA SPENDING IN THE 2020/21 SEASON"</span>,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>          <span class="at">subtitle =</span> <span class="st">"Bayern Munich and Borussia Dortmund are big net spenders this season,</span><span class="sc">\n</span><span class="st">while Bayer 04 Leverkusen have made the most money on the transfer market"</span>) <span class="sc">+</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># apply a pre-programmed general theme:</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># but then we can customise our plot even more - first we make the background black:</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"black"</span>),</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>        <span class="co"># play around with the x and y gridlines:</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major.x =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey20"</span>, <span class="at">linetype =</span> <span class="dv">2</span>), <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>        <span class="co"># change the title and subtitle format</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">28</span>, <span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">face=</span><span class="st">"bold"</span>), <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">22</span>, <span class="at">colour =</span> <span class="st">"white"</span>),</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>        <span class="co"># and change where the plot is aligned - in this case it's left-aligned</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title.position =</span> <span class="st">"plot"</span>, <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>        <span class="co"># change the colour and size of aixs titles and text, remove the y-axis title</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">size=</span><span class="dv">16</span>), <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>(), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="dv">14</span>),</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>        <span class="co"># remove the legend</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>        <span class="co">#format the plot caption:</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot_transfers-1.png" class="img-fluid" width="1152"></p>
</div>
</div>
</section>
</section>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>Hopefully you’ve made it this far!</p>
<p>We’ve gone through an overview of the <code>worldfootballR</code> package, designed to help you extract football data from popular soccer data websites, we’ve installed R and RStudio, we’ve started pulling data using the worldfootballR, we’ve saved it in either .xlsx or .csv, we’ve seen some brief statistical analysis, AND we’ve also created some visualisations using a mixture of <code>dplyr</code> (to get our data ready) and <code>ggplot</code>.</p>
<p>Hopefully this has stoked your interests enough into the possibilities available to you using R and <code>worldfootballR</code>!</p>
<p>If you have any questions or feedback, feel free to comment, or get in touch on twitter <a href="https://twitter.com/jaseziv">jaseziv</a>.</p>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><a href="https://jaseziv.github.io/worldfootballR/"><code>worldfootballR</code></a></li>
<li><a href="https://fbref.com/en/">FBref</a></li>
<li><a href="https://understat.com/">Understat</a></li>
<li><a href="https://www.transfermarkt.com/">Transfermarkt</a></li>
<li><a href="https://www.tidyverse.org/">tidyverse</a> - a collection of very valuable R packages for manipulating, analysing and visualising data</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>